<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    {% raw %}
    <div id="app">
    <header>
        <h1>üè∑Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏</h1>
        <canvas id="sparkleCanvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1;"></canvas>
        <a href="/" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –º–æ–¥–∞–º</a>
    </header>

    <main class="container">
        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–∞ -->
        <div class="tag-form">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–µ–≥</h2>
            <form @submit.prevent="addTag">
                <div class="form-group">
                    <input type="text" v-model="newTagName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞ (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)" 
                           required maxlength="50">
                </div>
                <button type="submit" class="tag-btn tag-btn-add">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥</button>
            </form>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤ -->
        <div class="tags-list">
            <h2>–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ–≥–∏ ({{ tags.length }})</h2>
            
            <div class="flash-container" v-if="flashMessage">
                <div :class="'flash-' + flashType">{{ flashMessage }}</div>
            </div>
            
            <div v-if="tags.length > 0">
                <table class="tags-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="tag in tags" :key="tag.id">
                            <td>
                                <span class="tag-link">{{ tag.name }}</span>
                            </td>
                            <td>
                                <form @submit.prevent="editTag(tag)" class="edit-form">
                                    <input type="text" v-model="tag.editName" 
                                        class="tag-input" maxlength="50">
                                    <button type="submit" class="tag-btn tag-btn-save">üíæ</button>
                                </form>
                            </td>
                            <td>{{ tag.created_at || 'N/A' }}</td>
                            <td>
                                <button @click="deleteTag(tag)" class="tag-btn tag-btn-delete">üóëÔ∏è</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div v-else>
                <p class="empty">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π!</p>
            </div>
        </div>
    </main>
    </div>
    {% endraw %}

    <script src="{{ url_for('static', filename='js/sparkles.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tags.js') }}"></script>
</body>
</html>